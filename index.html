<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Bio c·ªßa ngduyanh</title>

<style>
    body {
        margin: 0;
        font-family: "Arial", sans-serif;
        background: #0b0f2f;
        color: white;
        text-align: center;
        height: 100vh;
        overflow-x: hidden;
        transition: 0.4s;
    }
    body.light {
        background: #f4f4f4;
        color: #111;
    }

    /* N√∫t chuy·ªÉn ch·∫ø ƒë·ªô */
    #themeToggle {
        position: fixed;
        top: 15px;
        right: 15px;
        font-size: 28px;
        cursor: pointer;
        z-index: 9999;
        user-select: none;
    }

    .container {
        margin-top: 60px;
        animation: fadeIn 1.5s ease-in-out;
    }

    /* Avatar Neon */
    .avatar {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid #00eaff;
        box-shadow: 0 0 20px #00eaff;
        animation: neonPulse 2s infinite alternate;
    }

    @keyframes neonPulse {
        0% { box-shadow: 0 0 15px #00eaff; }
        100% { box-shadow: 0 0 45px #00eaff; }
    }

    .name {
        margin-top: 20px;
        font-size: 30px;
        font-weight: bold;
        text-shadow: 0 0 12px #00eaff;
    }

    .info {
        margin-top: 10px;
        font-size: 18px;
        opacity: 0.9;
    }

    .counter-box {
        margin-top: 20px;
        font-size: 20px;
        text-shadow: 0 0 8px #00eaff;
    }

    .heart-btn {
        margin-top: 15px;
        font-size: 28px;
        cursor: pointer;
        transition: 0.2s;
        user-select: none;
    }

    /* Hi·ªáu ·ª©ng tim n·ªï tung */
    .explosion {
        position: fixed;
        font-size: 20px;
        animation: explode 1s ease-out forwards;
        pointer-events: none;
    }

    @keyframes explode {
        0%   { opacity: 1; transform: scale(1) translate(0,0); }
        100% { opacity: 0; transform: scale(0) translate(var(--x), var(--y)); }
    }

    /* Tuy·∫øt 3D */
    .snowflake {
        position: fixed;
        top: -10px;
        color: white;
        opacity: 0.9;
        font-size: 1em;
        animation: fall linear infinite;
        filter: drop-shadow(0 0 5px white);
    }

    @keyframes fall {
        0% { transform: translateY(-10px); }
        100% { transform: translateY(100vh); }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to   { opacity: 1; }
    }
</style>
</head>

<body>

<!-- N√∫t Dark/Light -->
<div id="themeToggle">üåì</div>

<!-- Nh·∫°c n·ªÅn -->
<audio id="music" autoplay loop playsinline>
    <source src="https://files.catbox.moe/6a6zos.mp3" type="audio/mpeg">
</audio>

<script>
// Auto play nh·∫°c
document.addEventListener("DOMContentLoaded", () => {
    const music = document.getElementById("music");
    setTimeout(() => { music.play().catch(()=>{}); }, 300);
});
</script>

<div class="container">
    <img class="avatar" src="https://files.catbox.moe/l435rn.jpg" alt="Avatar">
    <div class="name">NgDuyAnh</div>
    <div class="info">Tu·ªïi: 17</div>
    <div class="info">Sinh ng√†y: 09/11/2008</div>
    <div class="info">S·ªëng t·∫°i: C√† Mau</div>

    <!-- L∆∞·ª£t xem -->
    <div class="counter-box">
        üëÅ L∆∞·ª£t xem h·ªì s∆°: <span id="viewCount">0</span>
    </div>

    <!-- N√∫t th·∫£ tim -->
    <div class="heart-btn" id="heartBtn">‚ù§Ô∏è <span id="heartCount">0</span></div>
</div>

<div id="explosionContainer"></div>

<script>
const npointURL = "https://api.npoint.io/65e720f113ff03e671a5";

/* ========== Hi·ªáu ·ª©ng tim n·ªï tung ========== */
function explodeHeart(x, y) {
    const container = document.body;

    for (let i = 0; i < 12; i++) {
        let h = document.createElement("div");
        h.className = "explosion";
        h.textContent = "‚ù§Ô∏è";

        // random h∆∞·ªõng n·ªï
        h.style.setProperty("--x", (Math.random()*200 - 100) + "px");
        h.style.setProperty("--y", (Math.random()*200 - 100) + "px");

        h.style.left = x + "px";
        h.style.top = y + "px";

        container.appendChild(h);
        setTimeout(() => h.remove(), 1000);
    }
}

/* ========== Dark / Light Mode ========== */
const themeBtn = document.getElementById("themeToggle");

if (localStorage.getItem("theme") === "light") {
    document.body.classList.add("light");
}

themeBtn.onclick = () => {
    document.body.classList.toggle("light");

    if (document.body.classList.contains("light"))
        localStorage.setItem("theme", "light");
    else
        localStorage.setItem("theme", "dark");
};

/* ========== API Load ========== */
async function loadData() {
    let data = await fetch(npointURL).then(r => r.json());

    document.getElementById("viewCount").textContent = data.views;
    document.getElementById("heartCount").textContent = data.likes;
}

// TƒÉng l∆∞·ª£t xem
async function increaseView() {
    let data = await fetch(npointURL).then(r => r.json());
    data.views++;

    await fetch(npointURL, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    });

    document.getElementById("viewCount").textContent = data.views;
}

/* ========== Ch·ªâ th·∫£ tim 1 l·∫ßn ========== */
function likedBefore() {
    return localStorage.getItem("liked_profile") === "true";
}

function setLiked() {
    localStorage.setItem("liked_profile", "true");
}

async function heartClick(e) {
    if (likedBefore())
        return alert("B·∫°n ƒë√£ th·∫£ tim 1 l·∫ßn r·ªìi ‚ù§Ô∏è");

    let data = await fetch(npointURL).then(r => r.json());
    data.likes++;

    await fetch(npointURL, {
        method: "PUT",
        headers: { "Content-Type":"application/json" },
        body: JSON.stringify(data)
    });

    document.getElementById("heartCount").textContent = data.likes;

    explodeHeart(e.clientX, e.clientY);

    setLiked();
}

/* ========== S·ª± ki·ªán click tim ========== */
document.getElementById("heartBtn").onclick = heartClick;

/* ========== Load & c·∫≠p nh·∫≠t view ========== */
loadData();
increaseView();

/* ========== Tuy·∫øt 3D ========== */
function snow3D() {
    const snow = document.createElement("div");
    snow.classList.add("snowflake");
    snow.textContent = "‚ùÑ";

    snow.style.left = Math.random() * 100 + "vw";
    snow.style.fontSize = Math.random() * 14 + 10 + "px";
    snow.style.animationDuration = Math.random() * 4 + 3 + "s";

    document.body.appendChild(snow);
    setTimeout(() => snow.remove(), 6000);
}
setInterval(snow3D, 80);
</script>

</body>
</html>